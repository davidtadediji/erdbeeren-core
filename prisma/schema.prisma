generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id               Int      @id @default(autoincrement())
  username         String
  password         String
  email            String
  role             String
  verificationCode String
  isVerified       Boolean    @default(false)
}


model Conversation {
  id              String       @id @default(uuid())
  participantSid  String
  metadata        Json?
  createdAt       DateTime     @default(now())
  lastUpdatedAt       DateTime     @updatedAt
  messages        Message[]
}

model Message {
  id              String       @id @default(uuid()) // Use native UUID generation
  conversation    Conversation  @relation(fields: [conversationId], references: [id])
  conversationId  String
  sender          String
  content         String
  sentAt          DateTime     @default(now())
  deliveredAt     DateTime?
  seenAt          DateTime?
}


